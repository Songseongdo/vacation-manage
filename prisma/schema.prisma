// datasource db {
//   provider = "postgresql"
//   url      = env("DATABASE_URL")
// }

generator client {
  provider = "prisma-client-js"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Employee {
  id          Int      @id @default(autoincrement())
  name        String
  joinedAt    DateTime // ì…ì‚¬ì¼
  leavePolicy String // 'CALENDAR' | 'ANNIVERSARY'
  type        String // 'ì•½ì‚¬' | 'ì „ì‚°' | 'ì¡°ì œ'

  // ğŸ”¹ í‡´ì‚¬ ê´€ë ¨
  resignedAt DateTime? // null = ì¬ì§ì¤‘

  vacations Vacation[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Vacation {
  id         Int @id @default(autoincrement())
  year       Int
  totalHours Int
  usedHours  Int @default(0)

  employee   Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  employeeId Int

  vacationUsages VacationUsage[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([employeeId, year])
}

model VacationUsage {
  id Int @id @default(autoincrement())

  startDate DateTime // íœ´ê°€ ì‹œì‘ì¼
  endDate   DateTime // íœ´ê°€ ì¢…ë£Œì¼ (ê°™ì€ ë‚  ê°€ëŠ¥)
  usedHours Int // FULL: 8, HALF: 4, HOURLY: n

  type   String // 'FULL' | 'HALF' | 'HOURLY'
  reason String? // ì—°ì°¨ ì‚¬ìœ 

  vacation   Vacation @relation(fields: [vacationId], references: [id], onDelete: Cascade)
  vacationId Int

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
